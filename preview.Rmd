---
title: "AB programación: Dataset de estudiantes"
output: html_notebook
---

## Explicación del dataset

El dataset ha sido sacado de la pagina kaggle: <https://www.kaggle.com/>. De la sección de datasets, específicamente hemos escogido este dataset: <https://www.kaggle.com/datasets/lainguyn123/student-performance-factors>. Este conjunto de datos ofrece una visión completa de diversos factores que afectan al rendimiento de los estudiantes en los exámenes. Incluye información sobre hábitos de estudio, asistencia, participación de los padres y otros aspectos que influyen en el éxito académico.

# Parte 1: carga y exploración de datos.

```{r}
library(readr)
library(skimr)
library(dplyr)
library(esquisse)

```

primero importamos el dataset, ademas importamos la librería skimr para la mejor visualización de los datos

```{r message=FALSE, warning=TRUE, paged.print=TRUE, show_col_types=}
st <- read_csv("estudiantes.csv", show_col_types = FALSE)
head(st,10, show_col_types = FALSE)
```

Tras un primer vistazo podemos observar que tenemos 20 columnas y tenemos tanto valores numéricos como no numéricos. Ademas sospechamos que hay bastantes valores categóricos. Vamos a analizarlo mas a fondo.

separamos las columnas numéricas de las no numéricas para mejor observación de los datos

```{r}
numeric_columns <- sapply(st, is.numeric)
```

```{r}
# Imprimir los valores únicos de todas las columnas no numéricas
lapply(st[!numeric_columns], unique)

```

Aquí podemos ver que todos las columnas no numéricas son categóricas. esto lo tendremos en cuenta para el análisis y la limpieza mas adelante

Ahora buscamos los valores nulos dentro de las columnas

Usamos skim mejor que `summary()` porque da mas información y presentada de forma mas limpia

```{r}
skim(st[!numeric_columns])
```

Se observa que tenemos valores nulos en 3 columnas: `Teacher_Quality`, `Parental_Educational_Level` y `Distance_From_Home` Mas tarde en la limpieza de datos veremos que hacer con ellos.

```{r message=FALSE, warning=FALSE, paged.print=FALSE}
skim(st[numeric_columns])
```

En los datos numéricos al contrario que pasaba en los no numéricos no tenemos ningún valor nulo.

# Parte 2: Limpieza de datos

vemos que tenemos valores nulos en 3 columnas:`Parental_Education_Level`, `Teacher_Quality`, `Distance_from_Home`\
como las 3 columnas son categóricas vamos a usar la moda en las 3 para poner el valor que mas se repite. como en r no existe una función que obtenga la moda directamente la creamos nosotros mismos.

```{r}
getmode <- function(v) {
   uniqv <- unique(v)                     
   uniqv[which.max(tabulate(match(v, uniqv)))]
}
```

```{r}
st <- st %>%
  mutate(
    Teacher_Quality = ifelse(is.na(Teacher_Quality), getmode(Teacher_Quality), Teacher_Quality), #si es NA (TRUE) salta `getmode(columna)`,si es False no cambia nada
    Parental_Education_Level = ifelse(is.na(Parental_Education_Level), getmode(Parental_Education_Level), Parental_Education_Level),
    Distance_from_Home = ifelse(is.na(Distance_from_Home), getmode(Distance_from_Home), Distance_from_Home)
  )

```

el `%\>%` esto es el `pipe`, que esta tomando el df `st`y lo paso como entrada a la siguiente función `mutate()`en este caso. Gracias esto nos evitamos escribir mutate para cada columna, permitiendo "fluir" a la función.

Comprobamos que no hay valores nulos.

```{r}
print(colSums(is.na(st)))
```

No hay valores nulos, lo que nos indica que ha funcionado

## Conversión de valores categóricos en factores de R, gracias a esto conseguimos lo siguiente

-   Los factores permiten a R entender que son datos categóricos y no simples textos\
-   facilita el análisis estadístico y creación de modelos.\
-   Permite establecer ordenes específicos entre categorías si es necesario\
-   Optimiza el uso de memoria de R

Convertimos en factores los categóricos y añadimos orden en algunos de ellos ya que tiene relevancia el orden (low\<medium\<high)

```{r}
st <- st %>%
  mutate(
    Parental_Involvement = factor(Parental_Involvement,
                                levels = c("Low", "Medium", "High"),
                                ordered = TRUE),
    Access_to_Resources = factor(Access_to_Resources,
                               levels = c("Low", "Medium", "High"),
                               ordered = TRUE),
    Extracurricular_Activities = factor(Extracurricular_Activities,
                                      levels = c("No", "Yes")),  
    Motivation_Level = factor(Motivation_Level,
                            levels = c("Low", "Medium", "High"),
                            ordered = TRUE),
    Internet_Access = factor(Internet_Access,
                           levels = c("No", "Yes")),  
    Family_Income = factor(Family_Income,
                         levels = c("Low", "Medium", "High"),
                         ordered = TRUE),
    Teacher_Quality = factor(Teacher_Quality,
                           levels = c("Low", "Medium", "High"),
                           ordered = TRUE),
    School_Type = factor(School_Type),  
    Peer_Influence = factor(Peer_Influence,
                          levels = c("Negative", "Neutral", "Positive"),
                          ordered = TRUE),
    Learning_Disabilities = factor(Learning_Disabilities,
                                 levels = c("No", "Yes")),  
    Parental_Education_Level = factor(Parental_Education_Level,
                                    levels = c("High School", "College", "Postgraduate"),
                                    ordered = TRUE),
    Distance_from_Home = factor(Distance_from_Home,
                              levels = c("Near", "Moderate", "Far"),
                              ordered = TRUE),
    Gender = factor(Gender)  
  )
```

Verificamos que se han convertido en factor.

```{r}
str(st)
```

# Objetivo de estos datos

Trabajaremos con estos datos en dos fases principales.

-   Fase 1: Análisis exploratorio de los datos

    -   `Objetivo principal` Analizar los factores que influyen en el rendimiento académico de los estudiantes, medido a través de sus puntuaciones en exámenes, considerando variables desde la parte económica y personal

    -   `Objetivos especificos`:

        -   Identificar qué variables tienen mayor impacto en las calificaciones de los exámenes

        -   Examinar cómo los factores socio económicos (Family_Income, Parental_Education_Level) afectan al rendimiento

        -   Evaluar la influencia de factores escolares (Teacher_Quality, School_Type, Access_to_Resources)

        -   Analizar el impacto de factores personales (Sleep_Hours, Motivation_Level, Learning_Disabilities)

-   Fase 2: Modelo predictivo.
